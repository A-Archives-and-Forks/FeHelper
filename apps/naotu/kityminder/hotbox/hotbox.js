!function(){var t={r:function(e){if(t[e].inited)return t[e].value;if("function"!=typeof t[e].value)return t[e].inited=!0,t[e].value;var n={exports:{}},i=t[e].value(null,n.exports,n);if(t[e].inited=!0,t[e].value=i,void 0!==i)return i;for(var o in n.exports)if(n.exports.hasOwnProperty(o))return t[e].inited=!0,t[e].value=n.exports,n.exports}};t[0]={value:function(e,n,i){i.exports=window.HotBox=t.r(1)}},t[1]={value:function(e,n,i){var o=t.r(2),a=t.r(3);function r(t){return document.createElement(t)}function s(t,e){t.classList.add(e)}function c(t,e){t.classList.remove(e)}function u(t,e){t.appendChild(e)}var l=h.STATE_IDLE="idle",f="div";function p(t,e){return"object"!=typeof e&&(e=[].slice.apply(arguments,1)),String(t).replace(/\{(\w+)\}/g,function(t,n){return e[n]||t})}function h(t){if("string"==typeof t&&(t=document.querySelector(t)),!(t&&t instanceof HTMLElement))throw new Error("No container or not invalid container for hot box");var e=r(f);s(e,"hotbox"),u(t,e),this.$element=e,this.$container=t,this.isIME=!1,this.browser={sg:/se[\s\S]+metasr/.test(navigator.userAgent.toLowerCase())},this._parentFSM={},this.position={};var n,i={},c=null,p=l,h=[],d=this;function y(t,e){if(d.position=e,t==l)p!=l&&(h.shift().deactive(),h=[]),p=l;else if("back"==t)p!=l&&(p.deactive(),h.shift(),(p=h[0])?p.active():p="idle");else{p!=l&&p.deactive();var n=i[t];h.unshift(n),"function"==typeof d.position&&(e=d.position(e)),n.active(e),p=n}}this.control=function(t){if(!n)return(n=new(t=t||a)(d)).active(),e.onmousedown=function(t){t.stopPropagation(),t.preventDefault()},d;n.active()},this.state=function(t){if(!t)return p;if(t==l)throw new Error("Can not define or use the `idle` state.");return i[t]=i[t]||new v(this,t),"main"==t&&(c=i[t]),i[t]},this.active=y,this.dispatch=function(e){var n=e.type.toLowerCase();if(e.keyHash=o.hash(e),e.isKey=function(t){if(!t)return!1;for(var n=t.split(/\s*\|\s*/);n.length;)if(e.keyHash==o.hash(n.shift()))return!0;return!1},e[n]=!0,!(e.keyup&&d.activeKey&&e.isKey(d.activeKey)&&p==l&&c)){var i=p==l?c:p;if(i){var a=i.handleKeyEvent(e);return"function"==typeof d.onkeyevent&&(e.handleResult=a,d.onkeyevent(e,a)),a}return null}y("main",{x:t.clientWidth/2,y:t.clientHeight/2})},this.setParentFSM=function(t){d._parentFSM=t},this.getParentFSM=function(){return d._parentFSM},this.activeKey="space",this.actionKey="space"}function v(t,e){var n="selected",i="pressed",o="active",a=r(f),h=r(f),v=r(f),d=r("div"),y=r(f),b=r(f);s(a,"state"),s(a,e),s(h,"center"),s(v,"ring"),s(d,"ring-shape"),s(y,"top"),s(b,"bottom"),u(t.$element,a),u(a,d),u(a,h),u(a,v),u(a,y),u(a,b),this.name=e;var g={center:null,ring:[],top:[],bottom:[],behind:[]},x=[],k=null,m=null,w=!1,E=!0;function K(){return!0}function L(t,e){return t('<span class="label">{label}</span><span class="key">{key}</span>',{label:e.label,key:e.key&&e.key.split("|")[0]})}function $(t){m&&m.$button&&c(m.$button,i),(m=t)&&m.$button&&s(m.$button,i)}function S(t){k&&k.$button&&k.$button&&c(k.$button,n),(k=t)&&k.$button&&s(k.$button,n)}function F(e){e&&(e.enable&&!e.enable()||(e.action&&e.action(e),t.active(e.next||l,t.position)),$(null),S(null))}this.button=function(t){var e=function(t){var e=r(f);s(e,"button");var n=t.render||L;switch(e.innerHTML=n(p,t),t.position){case"center":u(h,e);break;case"ring":u(v,e);break;case"top":u(y,e);break;case"bottom":u(b,e)}return{action:t.action,enable:t.enable||K,beforeShow:t.beforeShow,key:t.key,next:t.next,label:t.label,data:t.data||null,$button:e}}(t);"center"==t.position?g.center=e:g[t.position]&&g[t.position].push(e),x.push(e),E=!0},this.active=function(e){var n,i;(e=e||{x:t.$container.clientWidth/2,y:t.$container.clientHeight/2})&&(a.style.left=e.x+"px",a.style.top=e.y+"px"),x.forEach(function(t){var e=t.$button;e&&e.classList[t.enable()?"add":"remove"]("enabled"),t.beforeShow&&t.beforeShow()}),s(a,o),E&&(function(t){var e,n,i,o,a=g.ring,r=2*Math.PI/a.length;g.center&&(g.center.indexedPosition=[0,0]),d.style.marginLeft=d.style.marginTop=-t+"px",d.style.width=d.style.height=t+t+"px";for(var s=0;s<a.length;s++)e=a[s].$button,n=r*s-Math.PI/2,i=t*Math.cos(n),o=t*Math.sin(n),a[s].indexedPosition=[i,o],e.style.left=i+"px",e.style.top=o+"px"}(n=15*g.ring.length),function(t){var e=-y.clientWidth/2,n=2*-t-y.clientHeight/2;y.style.marginLeft=e+"px",y.style.marginTop=n+"px",g.top.forEach(function(t){var i=t.$button;t.indexedPosition=[e+i.offsetLeft+i.clientWidth/2,n]})}(n),function(t){var e=-b.clientWidth/2,n=2*t-b.clientHeight/2;b.style.marginLeft=e+"px",b.style.marginTop=n+"px",g.bottom.forEach(function(t){var i=t.$button;t.indexedPosition=[e+i.offsetLeft+i.clientWidth/2,n]})}(n),(i=x.filter(function(t){return t.indexedPosition})).forEach(function(t){var e,n,o,a,r,s,c={},u=0,l={},f=t.indexedPosition,p=Math.abs;i.forEach(function(i){if(t!=i)for(e=i.indexedPosition,r=[],n=e[0]-f[0],o=e[1]-f[1],a=Math.sqrt(n*n+o*o),p(n)>2&&(r.push(n>0?"right":"left"),r.push(a+p(o))),p(o)>2&&(r.push(o>0?"down":"up"),r.push(a+p(n)));r.length;)s=r.shift(),u=r.shift(),(!c[s]||u<l[s])&&(c[s]=i,l[s]=u)}),t.neighbor=c}),E=!1),k||S(g.center||g.ring[0]||g.top[0]||g.bottom[0]),w=!0},this.deactive=function(){c(a,o),S(null),w=!1},a.onmouseup=function(t){if(!t.button)for(var e=t.target;e&&e!=a;)e.classList.contains("button")&&x.forEach(function(t){t.$button==e&&F(t)}),e=e.parentNode},this.handleKeyEvent=function(n){var i=null;if(t.browser.sg&&n.isKey("esc"))return m?n.isKey(m.key)||$(null):t.active("back",t.position),"back";if(n.keydown||t.isIME&&n.keyup){if(x.forEach(function(o){if(o.enable()&&n.isKey(o.key)){if(w||t.hintDeactiveMainState){if(S(o),$(o),i="buttonpress",n.keyup)return F(o),i="execute"}else F(o),i="execute";n.preventDefault(),n.stopPropagation(),!w&&t.hintDeactiveMainState&&t.active(e,t.position)}}),w){if(n.isKey("esc"))return m?n.isKey(m.key)||$(null):t.active("back",t.position),"back";["up","down","left","right"].forEach(function(t){if(n.isKey(t))if(k){for(var e=k.neighbor[t];e&&!e.enable();)e=e.neighbor[t];e&&S(e),i="navigate"}else S(g.center||g.ring[0]||g.top[0]||g.bottom[0])}),n.isKey("space")&&n.keyup?(F(k),n.preventDefault(),n.stopPropagation(),i="execute"):n.isKey("space")&&k?($(k),i="buttonpress"):m&&m!=k&&($(null),i="selectcancel")}}else!n.keyup||!w&&t.hintDeactiveMainState||m&&(n.isKey("space")&&k==m||n.isKey(m.key))&&(F(m),n.preventDefault(),n.stopPropagation(),i="execute");return t.isIME=229==n.keyCode&&n.keydown,i}}i.exports=h}},t[2]={value:function(e,n,i){var o=t.r(4),a=4096,r=8192,s=16384;function c(t){return"string"==typeof t?(e=0,t.toLowerCase().split(/\s*\+\s*/).forEach(function(t){switch(t){case"ctrl":case"cmd":e|=a;break;case"alt":e|=r;break;case"shift":e|=s;break;default:e|=o[t]}}),e):function(t){var e=0;(t.ctrlKey||t.metaKey)&&(e|=a);t.altKey&&(e|=r);t.shiftKey&&(e|=s);-1==[16,17,18,91].indexOf(t.keyCode)&&(e|=t.keyCode);return e}(t);var e}n.hash=c,n.is=function(t,e){return t&&e&&c(t)==c(e)}}},t[3]={value:function(e,n,i){t.r(2);var o="hotbox-focus",a="hotbox-key-receiver";i.exports=function(t){var e,n=!0,i=!1,r=t.$container;function s(e){n&&t.dispatch(e)}function c(){e.select(),e.focus(),n=!0,r.classList.add(o)}function u(){e.blur(),n=!1,r.classList.remove(o)}(e=document.createElement("input")).classList.add(a),r.appendChild(e),i=!0,e.onkeyup=s,e.onkeypress=s,e.onkeydown=s,e.onfocus=c,e.onblur=u,i&&(e.oninput=function(t){e.value=null}),r.onmousedown=function(t){c(),t.preventDefault()},c(),this.handle=s,this.active=c,this.deactive=u}}},t[4]={value:function(t,e,n){var i={Shift:16,Control:17,Alt:18,CapsLock:20,BackSpace:8,Tab:9,Enter:13,Esc:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Left:37,Up:38,Right:39,Down:40,Direction:{37:1,38:1,39:1,40:1},Delete:46,NumLock:144,Cmd:91,CmdFF:224,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"`":192,"=":187,"-":189,"/":191,".":190};for(var o in i)i.hasOwnProperty(o)&&(i[o.toLowerCase()]=i[o]);var a="a".charCodeAt(0);"abcdefghijklmnopqrstuvwxyz".split("").forEach(function(t){i[t]=t.charCodeAt(0)-a+65});var r=9;do{i[r.toString()]=r+48}while(r--);n.exports=i}};var e,n={expose:0};e="expose",t.r([n[e]])}();