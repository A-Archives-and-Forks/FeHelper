var json_diff=function(){function r(e,n){if(e===n)return!0;if("object"!=typeof e||"object"!=typeof n)return!1;if(null===e||null===n)return!1;if(e instanceof Array!=n instanceof Array)return!1;if(e instanceof Array){if(e.length!=n.length)return!1;for(var f=0;f<e.length;f++)if(!r(e[f],n[f]))return!1}else{for(var t in e)if(!(t in n&&r(e[t],n[t])))return!1;for(var t in n)if(!(t in e))return!1}return!0}function e(r){if("object"==typeof r){if(r instanceof Array)return"array";if(null===r)return"null"}return typeof r}return function(n,f){var t=[],o=[];function i(r,e,n){var f=function(r){if(void 0===r)return"/";t.push(r);for(var e="",n=0;n<t.length;n++)e=e+"/"+t[n].toString().replace(/~/g,"~0").replace(/\//g,"~1");return t.pop(),e}(e);"remove"===r?o.push({op:r,path:f}):o.push({op:r,path:f,value:void 0===n?null:n})}function a(e,n,f){void 0!==f&&t.push(f),function(e,n){var f,t,o,a,s,c,l,p,h=[],v=[],d=[];for(o=e.length,a=n.length;o&&a&&r(e[o-1],n[a-1]);o--,a--);for(p=0;o&&a&&r(e[p],n[p]);p++,o--,a--);if(o&&a){for(t=0;t<a;h[t++]=0);for(f=0;f<o;f++)for(v[f]=h=h.slice(),c=0,t=0;t<a;t++,c=l)l=h[t],r(e[f+p],n[t+p])?h[t]=c+1:(s=h[t-1]||0)>h[t]&&(h[t]=s);for(f--,t--;f>-1&&t>-1;)switch(v[f][t]){default:d.unshift("="),f--,t--;break;case t&&v[f][t-1]:d.unshift("+"),t--;break;case f&&v[f-1][t]:d.unshift("-"),f--}}else f=o-1,t=a-1;for(;t>-1;t--)d.unshift("+");for(;f>-1;f--)d.unshift("-");var g=[];for(a=0;a<d.length;a++)if("-"===d[a]){for(f=a+1;f<d.length&&"-"===d[f];f++);for(t=f;t<d.length&&"+"===d[t];t++);if(f-a==t-f){for(;f++<t;)g.push("*");a=t-1}else{for(;a<t;a++)g.push(d[a]);a--}}else g.push(d[a]);for(d=g,f=0,t=0,a=0;a<d.length;a++)switch(d[a]){case"*":u(e[f+p],n[t+p],t+p);case"=":f++,t++;break;case"-":i("remove",t+p),f++;break;case"+":i("add",t+p,n[t+p]),t++}}(e,n),void 0!==f&&t.pop()}function u(r,n,f){if(r!==n){var o=e(r);if(o!==e(n))i("replace",f,n);else switch(o){case"object":!function(r,e,n){for(var f in void 0!==n&&t.push(n),r)f in e?u(r[f],e[f],f):i("remove",f);for(var f in e)f in r||i("add",f,e[f]);void 0!==n&&t.pop()}(r,n,f);break;case"array":a(r,n,f);break;default:i("replace",f,n)}}}return u(n,f,void 0),o}}();"undefined"!=typeof exports&&(exports.diff=json_diff);